\documentclass{article}
\usepackage{fontspec}
\usepackage{jim,amsmath}
\usepackage[francais]{babel}
\usepackage{listings}
%\usepackage{pxfonts}
\usepackage{graphicx}

% Title.
% ------
\title{Écriture et exécution répartie de scénarios interactifs}

\threeauthors
  {Auteur 1} {Organisme \\ Adresse électronique}
  {Auteur 2} {Organisme \\ Adresse électronique}
  {Auteur 3} {Organisme \\ Adresse électronique}

\begin{document}
\maketitle
\begin{abstract}
Le résumé doit être placé en haut de la colonne gauche et doit contenir entre 150 et 200 mots.
\end{abstract}
\section{Introduction}
\subsection{Contexte}

\subsubsection{Horloges}
\subsubsection{Synchronisation de médias}
\subsection{État de l'art}
\subsubsection{Rappel du modèle d'i-score}
\subsubsection{Répartition à l'édition}
\subsubsection{Répartition à l'exécution}
\subsubsection{Lien entre la répartition à l'édition et la répartition à l'exécution}

\section{Taxonomie et étude de cas}
-> installation en son réparti ?

- Problème de la latence entre i-score et raspberry, + utilisation de bande passante.

- Cas des applis de téléphone : un objet qui s'exécute sur plusieurs machines en parallèle dont on veut aggréger les résultats

- Approche alternative avec application mobile.

\section{Approche}
- Groupe, client

- Maître-esclave
\subsection{Édition}
- Partage de file undo - redo

- Un seul "document" logique sur lequel tout le monde travail. Comme google docs.

\subsection{Exécution}

\subsection{Introduction de primitives réparties dans i-score}
- On souhaite modifier le moins possible le modèle pour les utilisateurs

- Notion de groupe

- Problème des devices

- implémentation : on rajoute des délais dans les expressions.

Cas synchrone : 
* Sous-expression devient vraie
* Expression fixe une date possible pour le réseau et notifie les autres puis se fixe au bon délai.

Cas asynchrone : 
* Sous-expression devient vraie
* Expression envoie un message aux autres et se lance immédiatement.
Il faut définir sur quelle machine l'expression est validée.

- Cas de la borne max : trigger, bof

Groupes pour triggers : problème du consensus. Voir notamment Paxos, Raft... 
% https://github.com/apache/kudu

Pour l'instant : group leader ? ou bien tous se communiquent l'information et prennent la décision en fonction de cette information ?

- Latence : prendre moyenne et écart-type sur les dix dernières valeurs ? Ou juste dernière valeur ?
En LAN gigabit on est en général < à une milliseconde.

- Pour l'édition temps-réel, on doit permettre d'appliquer des "filtres" (par exemple qui vont rajouter une sur-expression, etc)
\subsection{Méchanismes de synchronisation}
- Cas possibles : 

\begin{lstlisting}
C1 ---t--- C3
C2 ---|--- C4
\end{lstlisting}
* Mode free ou synchronisé : pour chaque client ? 

Cas 1 : 
\begin{lstlisting}
C1 ---t--- C3
\end{lstlisting}
C1 libre, C3 libre : dès que t est vrai, un message est envoyé au master qui envoie à C3 le trigger. C1 s'est déjà arrêté.
Voire, ils peuvent se trig eux même en asynchrone.

C1 synchro, C3 synchro : dès que t est vrai, C1 calcule la date minimale à laquelle C3 peut être notifié, envoie le message et fixe ce temps de son côté.

Cas 2 : 
\begin{lstlisting}
C1 ---t--- C3
C2 ---|
\end{lstlisting}

* Synchronisation de la fin

* Synchronisation du début de la suite

En pratique, on n'implémente que la possibilité de synchro / désynchro toute une time node ; dire qu'une granularité plus fine est possible mais que l'intérêt n'apparaît pas en pratique dans les applications (et complexifierait l'UI pour rien).

Question principale : pour un time-node, comment choisit-on sur quelle machine une condition doit être vérifiée ? Possibilité de conditions groupées : faut-il que ce soit interne au formalisme (i.e. une case à cocher) ou externe (on dit explicitement \lstinline|machine1:/truc && machine2:/truc|)

Possibilité : synchronisation via démon externe (PTP, NTP...), mais pas toujours possible (on ne peut pas supposer que l'utilisateur a les droits pour changer l'horloge sur sa machine).

Synchronous ethernet

Ableton Link : synchro sur les ticks musicaux 

Avoir une horloge propre à i-score ? Mais du coup maintenant il faut la synchroniser à l'horloge système. 

Ce qu'on fait : ping régulier vers chaque client (toutes les 100 millisecondes)

Quand quelque chose doit se synchroniser, on dit à chaque machine à quel instant il est supposé arriver par rapport à son horloge système.

Extension via système de composants

Quand un client reçoit un ordre pour un timenode à t, il l'applique dès que t <= local(t) (modulo un tick?)

On ne synchronise qu'à chaque point d'entrée / de sortie d'un groupe de contraintes / time nodes
\subsection{Extension des possibilités d'écriture}
* Paramètres partagés

* Pattern matching sur addresses 

\section{Performance}
- Comparaison de l'algorithme "simple" et de l'algorithme avec retard

\section{Citations}

Toutes les références bibliographiques des citations devront être listées dans la section "\textsc{References}", numérotées et en ordre alphabétique. Toutes les références  listées devront être citées dans le texte. Quand  vous vous référez au document dans le texte, précisez son numéro \cite{Author:00}.

\begin{thebibliography}{2}

\bibitem {Author:00} Author, E.
''Titre du papier'',
{\it Proceedings of the International Symposium on Music Information
Retrieval}, Plymouth, USA, 2000.

\bibitem{Someone:02} Untel, A.
{\it  Titre du livre}.
L'Armada, Paris, 2005.

\end{thebibliography}

\end{document}
